define(["util","data"],function(e,t){var n=-1,i="allCate",r=-1,a=1,o=!1,s=function(){console.log("in initCates");for(var n=t.queryCates(),i=t.queryChildCateById(0),r='<ul class="folder-wrap">',a=0;a<n.length;a++){var o="";if(0===n[a].child.length)o='<li><p class="folder no-default" cateid='+n[a].id+'><i class="fa fa-folder-open folder-icon" style="padding-right: 5px;" aria-hidden="true"></i>'+n[a].name+"("+t.queryTasksNumByCate(n[a])+')<i class="fa fa-trash-o del" style="color: #b00d07;"></i></p></li>';else{if(0===n[a].id)o='<li><p class="folder" cateid='+n[a].id+'><i class="fa fa-folder-open folder-icon" style="padding-right: 5px;" aria-hidden="true"></i>'+n[a].name+'(1)</p><ul class="file-wrap">',o+='<li><p class="file" cateid='+i.id+'><i class="fa fa-file-o file-icon" style="padding-right: 5px;" aria-hidden="true"></i>'+i.name+"(1)</li>";else{o='<li><p class="folder no-default" cateid='+n[a].id+'><i class="fa fa-folder-open folder-icon" style="padding-right: 5px;" aria-hidden="true"></i>'+n[a].name+"("+t.queryTasksNumByCate(n[a])+')<i class="fa fa-trash-o del" style="color: #b00d07;"></i></p><ul class="file-wrap">',console.log(n[a].child);for(var s=t.queryChildCateByIdArr(n[a].child),l=0;l<s.length;l++){o+='<li><p class="file no-default" cateid='+s[l].id+'><i class="fa fa-file-o file-icon" style="padding-right: 5px;" aria-hidden="true"></i>'+s[l].name+"("+s[l].child.length+')<i class="fa fa-trash-o del" style="color: #b00d07;"></i></p><li>'}}o+="</ul></li>"}r+=o}r+="</ul>",e.$("#list-content").innerHTML=r,e.$("#all-tasks span").innerHTML=t.queryAllTasks().length},l=function(){for(var n=t.queryCates(),i='<option value="-1">新增主分类</option>',r=0;r<n.length;r++)0!==n[r].id&&(i+='<option value="'+n[r].id+'">'+n[r].name+"</option>");e.$("#select-cate").innerHTML=i,e.$("#input-cate").innerHTML=""},c=function(){e.$(".cover").style.display="block"},u=function(n,i){console.log(i);var r=i.parentNode;console.log(r),/folder/.test(r.className)?confirm("是否确定删除分类？")&&t.deleteCate(r.getAttribute("cateid")):/file/.test(r.className)?confirm("是否确定删除子分类？")&&t.deleteChildCate(r.getAttribute("cateid")):/task-self/.test(r.className)&&confirm("是否确定删除此任务")&&t.deleteTaskById(r.getAttribute("taskid")),s(),e.$("#task-list").innerHTML=m(t.queryAllTasks()),h(e.$("#all-tasks"))},d=function(){var n=e.$("#select-cate").value,i=e.$("#input-cate").value;""!==i?(console.log(typeof n),console.log(i),-1==n?(console.log("about going in addCate"),t.addCate(i)):(console.log("about going in addChildCate"),t.addChildCate(n,i)),console.log(localStorage.cate),s(),e.$(".cover").style.display="none",l()):alert("请输入新分类名称")},f=function(){e.$(".cover").style.display="none"},h=function(a){console.log("in clickOnCate"),p(),e.addClass(a,"selected");var o=e.$("#task-list"),s=a.getAttribute("cateid");console.log("cateid:"+s),"all-tasks"===a.getAttribute("id")?(o.innerHTML=m(t.queryAllTasks()),n=-1,i="allCate"):/folder/.test(a.className)?(o.innerHTML=m(t.queryTasksByCateId(s)),n=s,i="cate"):/file/.test(a.className)&&(o.innerHTML=m(t.queryTasksByChildCateId(s)),n=s,i="childCate"),v(),e.addClass(e.$("#all"),"selected"),e.$("[taskid]")&&e.addClass(e.$("[taskid]"),"selected"),C(r),A()},p=function(){for(var t=document.getElementsByClassName("folder"),n=document.getElementsByClassName("file"),i=0,r=t.length;i<r;i++)e.removeClass(t[i],"selected");for(var a=0,o=n.length;a<o;a++)e.removeClass(n[a],"selected");e.removeClass(e.$("#all-tasks"),"selected")},g=function(e){for(var n=[],i=[],a=0;a<e.length;a++)-1===n.indexOf(e[a].date)&&n.push(e[a].date);console.log("dateArr:    "+n),n=n.sort(),console.log("dateArr:    "+n);for(var o=0;o<n.length;o++){var s={};s.date=n[a],s.task=t.queryTasksByDateInTaskArr(n[a],e),i.push(s)}return r=i[0].task[0].id,i},m=function(e){console.log("in createTaskList, task: "+JSON.stringify(e));var t="";if(!e.length)return t;var n=g(e);console.log("sortedTask: "+JSON.stringify(n));for(var i=0,r=n.length;i<r;i++){console.log("l:"+r);var a=n[i];t+='<div class="time">'+a.date+"</div><ul>";for(var o=0,s=a.task.length;o<s;o++){t+=a.task[o].done?-1==a.task[o].id?'<li class="task-done task-self" taskid="'+a.task[o].id+'"><i class="fa fa-check" style="color: #23b812; padding-right: 5px;" aria-hidden="true"></i>'+a.task[o].name+"</li>":'<li class="task-done task-self" taskid="'+a.task[o].id+'"><i class="fa fa-check" style="color: #23b812; padding-right: 5px;" aria-hidden="true"></i>'+a.task[o].name+'<i class="fa fa-trash-o del" style="color: #b00d07;"></i></li>':'<li class="task-self" taskid="'+a.task[o].id+'">'+a.task[o].name+'<i class="fa fa-trash-o del" style="color: #b00d07;"></i></li>'}t+="</ul>"}return t},v=function(){e.removeClass(e.$("#all"),"selected"),e.removeClass(e.$("#done"),"selected"),e.removeClass(e.$("#undone"),"selected")},y=function(r,a){v(),e.addClass(r,"selected");var o=e.$("#task-list");o.innerHTML=m(-1==n?t.queryAllTasks(a):"cate"===i?t.queryTasksByCateId(n,a):t.queryTasksByChildCateId(n,a))},k=function(){e.addClickEvent(e.$("#all"),function(){y(this)}),e.addClickEvent(e.$("#undone"),function(){y(this,!1)}),e.addClickEvent(e.$("#done"),function(){y(this,!0)})},b=function(t){E(),e.addClass(t,"selected");var n=t.getAttribute("taskid");r=n,C(n),L()},C=function(n){console.log("in showTaskContentById");var i=t.queryTaskById(n);if(console.log(i.done),i.done)e.$(".operation").innerHTML="";else{var r='<i class="fa fa-pencil-square-o" id="edit-icon" style="font-size: 25px; margin-right: 15px; cursor: pointer;" aria-hidden="true"></i>';r+='<i class="fa fa-check-square-o" id="check-icon" style="font-size: 25px; cursor: pointer;" aria-hidden="true"></i>',e.$(".operation").innerHTML=r,e.addClickEvent(e.$("#check-icon"),O),e.addClickEvent(e.$("#edit-icon"),M)}e.$(".todo-name").innerHTML=i.name,e.$(".date span").innerHTML=i.date,e.$(".content").innerHTML=i.content,e.$(".button-area").style.display="none"},E=function(){for(var t=e.$("#task-list").getElementsByTagName("li"),n=0,i=t.length;n<i;n++)e.removeClass(t[n],"selected")},x=function(){console.log("in clickAddTask"),console.log(typeof n),-1==n||"childCate"!==i?(alert("请选择具体子分类，若没有，请先建立子分类"),N()):0==n?(alert("不能给默认子分类添加任务"),N()):(S(),L())},S=function(){e.$(".todo-name").innerHTML='<input type="text" class="input-title" maxlength="15" placeholder="请输入标题（不超过15字符）...">',e.$(".date span").innerHTML='<input type="date" class="input-date">',e.$(".content").innerHTML='<textarea class="text-content" placeholder="请输入内容..."></textarea>',e.$(".button-area").style.display="block"},T=function(){console.log("in updateTaskList");var r=e.$("#task-list");"allCate"===i?(console.log("allCate"),r.innerHTML=m(t.queryAllTasks())):"cate"===i?(console.log("cate"),r.innerHTML=m(t.queryTasksByCateId(n))):(console.log("childCate"),console.log(n),r.innerHTML=m(t.queryTasksByChildCateId(n)))},w=function(){var i,a,l=e.$(".input-title").value,c=e.$(".input-date").value,u=e.$(".text-content").value;e.$("#task-list");if(!(l&&c&&u))return alert("标题、日期和任务内容都不能为空，请重新输入。"),void S();if(o)i=r,console.log("before:"+localStorage.task),t.updateTaskById(r,l,c,u),console.log("after:"+localStorage.task);else{var d={};d.name=e.escape(l),d.date=e.escape(c),d.content=e.escape(u),d.done=!1,d.parent=n,console.log(d),a=t.addTask(d),console.log("after addTask, currentTaskId:  "+a)}T(),console.log("currentTaskId again: "+r),C(r=o?i:a),s(),o=!1},q=function(){C(r)},O=function(){confirm("确定将任务标记为已完成吗？")&&(t.updateTaskStatusById(r),C(r),y(e.$("#all")))},M=function(){var n=t.queryTaskById(r);e.$(".todo-name").innerHTML='<input type="text" class="input-title" max-length="20" placeholder="请输入标题..." value="'+n.name+'">',e.$(".date span").innerHTML='<input type="date" class="input-date" value="'+n.date+'">',e.$(".content").innerHTML='<textarea class="text-content" placeholder="请输入内容...">'+n.content+"</textarea>",e.$(".button-area").style.display="block",o=!0},N=function(){console.log("in setCurr1"),e.$(".category").setAttribute("class","category view curr"),e.$(".list-all").setAttribute("class","list-all view next"),a=1,$(1)},A=function(){console.log("in setCurr2"),e.$(".category").setAttribute("class","category view last"),e.$(".list-all").setAttribute("class","list-all view curr"),e.$(".description").setAttribute("class","description view next"),a=2,$(2)},L=function(){console.log("in setCurr3"),e.$(".list-all").setAttribute("class","list-all view last"),e.$(".description").setAttribute("class","description view curr"),a=3,$(3)},$=function(t){if(window.innerWidth<760){var n=e.$("#backto");switch(t){case 1:n.style.display="none";break;case 2:case 3:n.style.display="block"}}},B=function(){if(window.innerWidth<760){console.log("in clickBackTo"),console.log("currentPage: "+a);e.$("#backto");switch(a){case 2:N();break;case 3:A()}}},P=function(){return"ontouchstart"in window||navigator.maxTouchPoints},I=function(){if(console.log("touch-device?  "+P()),P()){var e=document.styleSheets[0],t=e.cssRules.length;e.insertRule("#all-tasks:hover {border: none; border-radius: 0; box-shadow: none; transition: none;}",t),e.insertRule(".folder:hover {border: none; border-radius: 0; box-shadow: none; transition: none;}",t+1),e.insertRule(".file:hover {border: none; border-radius: 0; box-shadow: none; transition: none;}",t+2),e.insertRule(".task-self:hover {border: none; border-radius: 0; box-shadow: none; transition: none;}",t+3),e.insertRule(".add:hover {box-shadow: none; transition: none;}",t+4),e.insertRule(".filter:hover {color: #000;}",t+5),e.insertRule(".del {visibility: visible;}",t+6)}};return{initAll:function(){t.initDataBase(),s(),l(),e.$("#task-list").innerHTML=m(t.queryAllTasks()),k(),e.addClass(e.$("[taskid]"),"selected"),C(e.$("[taskid]").getAttribute("taskid")),I(),document.ontouchmove=function(e){e.preventDefault()},e.addClickEvent(e.$(".category .add"),c),e.addClickEvent(e.$(".list-all .add"),x),e.addClickEvent(e.$("#all-tasks"),function(){h(this)}),e.addClickEvent(e.$("#backto"),B),e.addClickEvent(e.$(".save"),w),e.addClickEvent(e.$(".cancel-save"),q),e.addClickEvent(e.$(".ok"),d),e.addClickEvent(e.$(".cancel-ok"),f),e.delegateEvent(e.$("#list-content"),"p","click",function(){h(this)}),e.delegateEvent(e.$("#task-list"),"li","click",function(){b(this)}),e.delegateDelEvent(e.$("#list-content"),"fa-trash-o","click",function(){u(event,this)}),e.delegateDelEvent(e.$("#task-list"),"fa-trash-o","click",function(){u(event,this)}),e.addEvent(window,"resize",function(){window.innerWidth>760?e.$("#backto").style.display="none":P()||(console.log("in window.onresize"),B(a))})}}}),define(["util"],function(e){console.log(localStorage.cate);var t=function(){return JSON.parse(localStorage.cate)},n=function(e){for(var t=JSON.parse(localStorage.cate),n=t.length,i=0;i<n;i++)if(t[i].id==e)return t[i]},i=function(){return JSON.parse(localStorage.childCate)},r=function(e){for(var t=JSON.parse(localStorage.childCate),n=t.length,i=0;i<n;i++)if(t[i].id==e)return t[i]},a=function(e){var t=JSON.parse(localStorage.task),n=[],i=t.length;if("boolean"!=typeof e)return t;for(var r=0;r<i;r++)e&&t[r].done?n.push(t[r]):e||t[r].done||n.push(t[r]);return n},o=function(e){for(var t=a(),n=t.length,i=0;i<n;i++)if(t[i].id==e)return t[i]},s=function(e,t){var n=[],i=r(e).child,a=i.length;console.log(JSON.stringify(r(e))),console.log("arr: "+i);for(var s=0;s<a;s++){var l=o(i[s]);"boolean"!=typeof t?n.push(l):t&&l.done?n.push(l):t||l.done||n.push(l)}return n},l=function(e,t){console.log("in updateCateChildByAdd"),console.log(localStorage.cate);for(var n=JSON.parse(localStorage.cate),i=n.length,r=0;r<i;r++)if(n[r].id==e){n[r].child.push(t);break}localStorage.cate=JSON.stringify(n)},c=function(e,t){for(var n=JSON.parse(localStorage.cate),i=n.length,r=0;r<i;r++){var a=n[r];if(a.id==e)for(var o=0;o<a.child.length;o++)if(a.child[o]===t){a.child.splice(o,1);break}}localStorage.cate=JSON.stringify(n)},u=function(e,t){for(var n=i(),r=n.length,a=0;a<r;a++)if(n[a].id==e){n[a].child.push(t);break}localStorage.childCate=JSON.stringify(n)},d=function(e,t){console.log("in updateChildCateChildByDel");for(var n=i(),r=n.length,a=0;a<r;a++){var o=n[a];if(o.id==e){console.log(JSON.stringify(o.child));for(var s=0;s<o.child.length;s++)if(o.child[s]==t){o.child.splice(s,1);break}console.log(JSON.stringify(o.child))}}localStorage.childCate=JSON.stringify(n)},f=function(e){console.log("in deleteChildCate");for(var t=i(),n=0;n<t.length;n++){var r=t[n];if(r.id==e){t.splice(n,1),console.log(r.child);for(var a=0,o=r.child.length;a<o;a++)console.log(o),h(r.child[a]);c(r.parent,r.id)}}localStorage.childCate=JSON.stringify(t)},h=function(e){console.log("in deleteTaskById");for(var t=a(),n=0;n<t.length;n++){var i=t[n];if(i.id==e){t.splice(n,1),d(i.parent,i.id);break}}localStorage.task=JSON.stringify(t)};return{initDataBase:function(){if(!localStorage.cate||!localStorage.childCate||!localStorage.task){var e=[{id:0,name:"默认分类",child:[0]}],t=[{id:0,parent:0,name:"默认子分类",child:[-1]}],n=[{id:-1,parent:0,done:!0,name:"介绍",date:"2017-7-30",content:"这是一个个人任务管理系统，为离线应用，数据保存在本地硬盘。<br>"}];localStorage.cate=JSON.stringify(e),localStorage.childCate=JSON.stringify(t),localStorage.task=JSON.stringify(n)}},queryCates:t,queryCateById:n,queryTasksNumByCateId:function(e){for(var t=n(e),i=0,a=t.child.length,o=0;o<a;o++)i+=r(t.chlid[o]).child.length;return i},queryTasksNumByCate:function(e){for(var t=0,n=e.child.length,i=0;i<n;i++)t+=r(e.child[i]).child.length;return t},queryAllChildCates:i,queryChildCateById:r,queryChildCateByIdArr:function(t){if(console.log("in queryChildCateByIdArr"),e.isArray(t)){for(var n=[],i=t.length,a=0;a<i;a++)n.push(r(t[a]));return console.log(n),n}},queryAllTasks:a,queryTasksByDateInTaskArr:function(e,t){for(var n=[],i=t.length,r=0;r<i;r++)t[r].date===e&&n.push(t[r]);return n},queryTaskById:o,queryTasksByChildCateId:s,queryTasksByCateId:function(e,t){console.log("in queryTasksByCateId");for(var i=[],r=n(e).child,a=r.length,o=0;o<a;o++)i="boolean"!=typeof t?i.concat(s(r[o])):i.concat(s(r[o],t));return i},addCate:function(e){var t=JSON.parse(localStorage.cate),n={};n.id=t[t.length-1].id+1,n.name=e,n.child=[],t.push(n),localStorage.cate=JSON.stringify(t)},addChildCate:function(e,t){var n=JSON.parse(localStorage.childCate),i={};i.id=n[n.length-1].id+1,i.parent=e,i.name=t,i.child=[],console.log(i),n.push(i),console.log(n),localStorage.childCate=JSON.stringify(n),l(e,i.id),console.log("after updateCateChildByAdd: "+localStorage.cate)},addTask:function(e){var t=a();return e.id=t[t.length-1].id+1,t.push(e),u(e.parent,e.id),localStorage.task=JSON.stringify(t),console.log("in addTask, allTasks: "+localStorage.task),e.id},updateCateChildByAdd:l,updateCateChildByDel:c,updateChildCateChildByAdd:u,updateChildCateChildByDel:d,updateTaskStatusById:function(e){for(var t=a(),n=t.length,i=0;i<n;i++)if(t[i].id==e){t[i].done=!0;break}localStorage.task=JSON.stringify(t),console.log("after updateTaskStatusById, task: "+localStorage.task)},updateTaskById:function(e,t,n,i){for(var r=a(),o=r.length,s=0;s<o;s++){var l=r[s];if(l.id==e){l.name=t,l.date=n,l.content=i;break}}localStorage.task=JSON.stringify(r)},deleteCate:function(e){var n=t();console.log("id: "+e);for(var i=0;i<n.length;i++){var r=n[i];if(console.log("in for"),r.id==e){n.splice(i,1),console.log("cate spliced: "+n);for(var a=0,o=r.child.length;a<o;a++)f(r.child[a])}}localStorage.cate=JSON.stringify(n)},deleteChildCate:f,deleteTaskById:h}}),console.log("in main.js"),require.config({paths:{util:"helper/util",fastclick:"helper/fastclick"}}),require(["control","fastclick"],function(e,t){e.initAll(),console.log(t),t.attach(document.body)});var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){!n&&hasProp(e,r)||(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),mixin(e[r],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var r,a,o,s,l,c,u,d,f,h,p=n&&n.split("/"),g=x.map,m=g&&g["*"];if(e&&(c=(e=e.split("/")).length-1,x.nodeIdCompat&&jsSuffixRegExp.test(e[c])&&(e[c]=e[c].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&p&&(e=p.slice(0,p.length-1).concat(e)),t(e),e=e.join("/")),i&&g&&(p||m)){e:for(o=(a=e.split("/")).length;o>0;o-=1){if(l=a.slice(0,o).join("/"),p)for(s=p.length;s>0;s-=1)if((r=getOwn(g,p.slice(0,s).join("/")))&&(r=getOwn(r,l))){u=r,d=o;break e}!f&&m&&getOwn(m,l)&&(f=getOwn(m,l),h=o)}!u&&f&&(u=f,d=h),u&&(a.splice(0,d,u),e=a.join("/"))}return getOwn(x.pkgs,e)||e}function i(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===b.contextName)return t.parentNode.removeChild(t),!0})}function r(e){var t=getOwn(x.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),b.require.undef(e),b.makeRequire(null,{skipMap:!0})([e]),!0}function a(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,i,r){var o,s,l,c,u=null,d=t?t.name:null,f=e,h=!0,p="";return e||(h=!1,e="_@r"+(A+=1)),c=a(e),u=c[0],e=c[1],u&&(u=n(u,d,r),s=getOwn(O,u)),e&&(u?p=i?e:s&&s.normalize?s.normalize(e,function(e){return n(e,d,r)}):-1===e.indexOf("!")?n(e,d,r):e:(u=(c=a(p=n(e,d,r)))[0],p=c[1],i=!0,o=b.nameToUrl(p))),l=!u||s||i?"":"_unnormalized"+(L+=1),{prefix:u,name:p,parentMap:t,unnormalized:!!l,url:o,originalName:f,isDefine:h,id:(u?u+"!"+p:p)+l}}function s(e){var t=e.id,n=getOwn(S,t);return n||(n=S[t]=new b.Module(e)),n}function l(e,t,n){var i=e.id,r=getOwn(S,i);!hasProp(O,i)||r&&!r.defineEmitComplete?(r=s(e)).error&&"error"===t?n(r.error):r.on(t,n):"defined"===t&&n(O[i])}function c(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(S,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function u(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(b.defQueueMap[t]=!0),q.push(e)}),globalDefQueue=[])}function d(e){delete S[e],delete T[e]}function f(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,r){var a=i.id,o=getOwn(S,a);!o||e.depMatched[r]||n[a]||(getOwn(t,a)?(e.defineDep(r,O[a]),e.check()):f(o,t,n))}),n[i]=!0)}function h(){var e,t,n=1e3*x.waitSeconds,a=n&&b.startTime+n<(new Date).getTime(),o=[],s=[],l=!1,u=!0;if(!y){if(y=!0,eachProp(T,function(e){var n=e.map,c=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&a)r(c)?(t=!0,l=!0):(o.push(c),i(c));else if(!e.inited&&e.fetched&&n.isDefine&&(l=!0,!n.prefix))return u=!1}),a&&o.length)return e=makeError("timeout","Load timeout for modules: "+o,null,o),e.contextName=b.contextName,c(e);u&&each(s,function(e){f(e,{},{})}),a&&!t||!l||!isBrowser&&!isWebWorker||E||(E=setTimeout(function(){E=0,h()},50)),y=!1}}function p(e){hasProp(O,e[0])||s(o(e[0],null,!0)).init(e[1],e[2])}function g(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function m(e){var t=e.currentTarget||e.srcElement;return g(t,b.onScriptLoad,"load","onreadystatechange"),g(t,b.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(u();q.length;){if(null===(e=q.shift())[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));p(e)}b.defQueueMap={}}var y,k,b,C,E,x={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},S={},T={},w={},q=[],O={},M={},N={},A=1,L=1;return C={require:function(e){return e.require?e.require:e.require=b.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?O[e.map.id]=e.exports:e.exports=O[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(x.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},k=function(e){this.events=getOwn(w,e.id)||{},this.map=e,this.shim=getOwn(x.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},k.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,b.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();b.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;M[e]||(M[e]=!0,b.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,r=this.exports,a=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(a)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{r=b.execCb(n,a,i,r)}catch(t){e=t}else r=b.execCb(n,a,i,r);if(this.map.isDefine&&void 0===r&&((t=this.module)?r=t.exports:this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else r=a;if(this.exports=r,this.map.isDefine&&!this.ignore&&(O[n]=r,req.onResourceLoad)){var o=[];each(this.depMaps,function(e){o.push(e.normalizedMap||e)}),req.onResourceLoad(b,this.map,o)}d(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(b.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=o(e.prefix);this.depMaps.push(i),l(i,"defined",bind(this,function(i){var r,a,u,f=getOwn(N,this.map.id),h=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,g=b.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(h=i.normalize(h,function(e){return n(e,p,!0)})||""),a=o(e.prefix+"!"+h,this.map.parentMap,!0),l(a,"defined",bind(this,function(e){this.map.normalizedMap=a,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((u=getOwn(S,a.id))&&(this.depMaps.push(a),this.events.error&&u.on("error",bind(this,function(e){this.emit("error",e)})),u.enable()))):f?(this.map.url=b.nameToUrl(f),void this.load()):((r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(S,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&d(e.map.id)}),c(e)}),r.fromText=bind(this,function(n,i){var a=e.name,l=o(a),u=useInteractive;i&&(n=i),u&&(useInteractive=!1),s(l),hasProp(x.config,t)&&(x.config[a]=x.config[t]);try{req.exec(n)}catch(e){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}u&&(useInteractive=!0),this.depMaps.push(l),b.completeLoad(a),g([a],r)}),void i.load(e.name,g,r,x))})),b.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){T[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,r;if("string"==typeof e){if(e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(C,e.id))return void(this.depExports[t]=r(this));this.depCount+=1,l(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?l(e,"error",bind(this,this.errback)):this.events.error&&l(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,i=S[n],hasProp(C,n)||!i||i.enabled||b.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(S,e.id);t&&!t.enabled&&b.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},b={config:x,contextName:e,registry:S,defined:O,urlFetched:M,defQueue:q,defQueueMap:{},Module:k,makeModuleMap:o,nextTick:req.nextTick,onError:c,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,n){return(-1===n.indexOf("?")?"?":"&")+t}}var n=x.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?(x[t]||(x[t]={}),mixin(x[t],e,!0,!0)):x[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(N[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=b.makeShimExports(e)),n[t]=e}),x.shim=n),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(x.paths[t]=e.location),x.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(S,function(e,t){e.inited||e.map.unnormalized||(e.map=o(t,null,!0))}),(e.deps||e.callback)&&b.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(t,r){function a(n,i,l){var u,d,f;return r.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?c(makeError("requireargs","Invalid require call"),l):t&&hasProp(C,n)?C[n](S[t.id]):req.get?req.get(b,n,t,a):(d=o(n,t,!1,!0),u=d.id,hasProp(O,u)?O[u]:c(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),b.nextTick(function(){v(),(f=s(o(null,t))).skipMap=r.skipMap,f.init(n,i,l,{enabled:!0}),h()}),a)}return r=r||{},mixin(a,{isBrowser:isBrowser,toUrl:function(e){var i,r=e.lastIndexOf("."),a=e.split("/")[0],o="."===a||".."===a;return-1!==r&&(!o||r>1)&&(i=e.substring(r,e.length),e=e.substring(0,r)),b.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(O,o(e,t,!1,!0).id)},specified:function(e){return e=o(e,t,!1,!0).id,hasProp(O,e)||hasProp(S,e)}}),t||(a.undef=function(e){u();var n=o(e,t,!0),r=getOwn(S,e);r.undefed=!0,i(e),delete O[e],delete M[n.url],delete w[e],eachReverse(q,function(t,n){t[0]===e&&q.splice(n,1)}),delete b.defQueueMap[e],r&&(r.events.defined&&(w[e]=r.events),d(e))}),a},enable:function(e){getOwn(S,e.id)&&s(e).enable()},completeLoad:function(e){var t,n,i,a=getOwn(x.shim,e)||{},o=a.exports;for(u();q.length;){if(null===(n=q.shift())[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);p(n)}if(b.defQueueMap={},i=getOwn(S,e),!t&&!hasProp(O,e)&&i&&!i.inited){if(!(!x.enforceDefine||o&&getGlobal(o)))return r(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));p([e,a.deps||[],a.exportsFn])}h()},nameToUrl:function(e,t,n){var i,r,a,o,s,l,c,u=getOwn(x.pkgs,e);if(u&&(e=u),c=getOwn(N,e))return b.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(i=x.paths,a=(r=e.split("/")).length;a>0;a-=1)if(o=r.slice(0,a).join("/"),l=getOwn(i,o)){isArray(l)&&(l=l[0]),r.splice(0,a,l);break}s=r.join("/"),s=("/"===(s+=t||(/^data\:|^blob\:|\?/.test(s)||n?"":".js")).charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+s}return x.urlArgs&&!/^blob\:/.test(s)?s+x.urlArgs(e,s):s},load:function(e,t){req.load(b,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=m(e);b.completeLoad(t.id)}},onScriptError:function(e){var t=m(e);if(!r(t.id)){var n=[];return eachProp(S,function(e,i){0!==i.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return n.push(i),!0})}),c(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}},b.require=b.makeRequire(),b}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.4",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,a,o=defContextName;return isArray(e)||"string"==typeof e||(a=e,isArray(t)?(e=t,t=n,n=i):e=[]),a&&a.context&&(o=a.context),(r=getOwn(contexts,o))||(r=contexts[o]=req.s.newContext(o)),a&&r.configure(a),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return(i=req.createNode(r,t,n)).setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,r.onNodeCreated&&r.onNodeCreated(i,r,t,n),currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),e.completeLoad(t)}catch(i){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript())&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")]),r?(r.defQueue.push([e,t,n]),r.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),function(){"use strict";function e(t,i){var r;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=this,s=0,l=a.length;s<l;s++)o[a[s]]=function(e,t){return function(){return e.apply(t,arguments)}}(o[a[s]],o);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(r=t.onclick,t.addEventListener("click",function(e){r(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=i&&/OS [6-7]_\d/.test(navigator.userAgent),o=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,a;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if((a=window.getSelection()).rangeCount&&!a.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,o,s,l,c,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(c=e.changedTouches[0],(u=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||u).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(s=u.tagName.toLowerCase())){if(t=this.findControl(u)){if(this.focus(u),n)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-o>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return!(!i||r||!(l=u.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,r;if(void 0===window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(o&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===e.style.touchAction||"manipulation"===e.style.touchAction)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),define(function(){var e=function(e){function t(){}function n(e,n){n=n||{id:t,className:t,tag:t,attribute:t};var i,o=[].slice.call(arguments,2);if(u=e.match(r))i="id",o.push(u[1]);else if(u=e.match(a))i="className",o.push(u[1]);else if(u=e.match(s))i="tag",o.push(u[0]);else if(u=e.match(l)){i="attribute";var c=u[1],d=u[2],f=u[4];o.push(c,d,f)}return n[i].apply(null,o)}function i(e,t){for(var r=e.pop(),a=[],s=0,l=t.length;s<l;s++){for(var c=t[s],u=c;u=u.parentNode;){var d={id:function(e,t){return e.id===t},className:function(e,t){return o(e,t)},tag:function(e,t){return e.tagName.toLowerCase()===t},attribute:function(e,t,n,i){var r=!0;return t&&(r=d.tag(e,t)),r=r&&e.hasAttribute(n),i&&(r=r&&i===e.getAttribute(n)),r}},f=n(r,d,u);if(f)break}f&&a.push(c)}return e[0]&&a[0]?i(e,a):a[0]}var r=/^#([\w_\-]+)/,a=/^\.([\w_\-]+)/,s=/^\w+$/i,l=/(\w+)?\[([^=\]]+)(?:=(["'])?([^\]"']+)\3?)?\]/,c=document,u=function(e,t){var r=n(e.pop(),{id:function(e){return[document.getElementById(e)]},className:function(e){var n=[];if(t.getElementsByClassName)n=t.getElementsByClassName(e);else for(var i=t.getElementsByTagName("*"),r=0,a=i.length;r<a;r++){var s=i[r];o(s,e)&&n.push(s)}return n},tag:function(e){return t.getElementsByTagName(e)},attribute:function(e,n,i){for(var r=[],a=t.getElementsByTagName(e||"*"),o=0,s=a.length;o<s;o++){var l=a[o];i?l.getAttribute(n)===i&&r.push(l):l.hasAttribute(n)&&r.push(l)}return r}});return r=[].slice.call(r),e[0]&&r[0]?i(e,r):r[0]}(e.split(/\s+/),c);return u},t=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(e){return"[object Function]"===Object.prototype.toString.call(e)},i=function(e){var t,n=Object.prototype.hasOwnProperty;if(!(e&&"[object Object]"===Object.prototype.toString.call(e)&&"isPrototypeOf"in e))return!1;if(e.constructor&&!n.call(e,"constructor")&&!n.call(e.constructor.prototype,"isPrototypeOf"))return!1;for(t in e);return void 0===t||n.call(e,t)},r=function(e){var n,a,o=e;if(!e||e instanceof Number||e instanceof String||e instanceof Boolean)return o;if(t(e)){o=[];var s=0;for(n=0,a=e.length;n<a;n++)o[s++]=r(e[n])}else if(i(e)){o={};for(n in e)e.hasOwnProperty(n)&&(o[n]=r(e[n]))}return o},a=function(e){return e.match(/\S+.+\S/)},o=function(e,t){var n=e.className;if(!n)return!1;for(var i=0,r=(n=n.split(/\s+/)).length;i<r;i++)if(n[i]===t)return!0;return!1},s=function(e,t,n){t=t.replace(/^on/i,"").toLowerCase(),e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},l=function(e,t){s(e,"click",t)},c=function(e,t,n,i){console.log("in delegateEvent"),s(e,n,function(e){var n=e||window.event,r=e.target||e.srcElement;r&&r.tagName===t.toUpperCase()&&(console.log("if matched"),i.call(r,n))})},u=function(e,t,n,i){s(e,n,function(e){var n=e||window.event,r=e.target||e.srcElement;r&&-1!==r.className.indexOf(t)&&i.call(r,n)})};console.log(typeof u),e.on=function(t,n,i){s(e(t),n,i)},e.click=function(t,n){l(e(t),n)},e.un=function(t,n,i){removeEventListener(e(t),n,i)},e.delegate=function(t,n,i,r){c(e(t),n,i,r)};return{$:e,isArray:t,isFunction:n,cloneObject:r,uniqArray:function(e){e.sort(function(e,t){return e===t?0:typeof e==typeof t?e<t?-1:1:typeof e<typeof t?-1:1});for(var t=0;t<e.length;t++)for(;e[t]===e[t+1];)e.splice(t+1,1);return e},trim:a,each:function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)},getObjectLength:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},isEmail:function(e){return/^([\w\.\-\+])+\@([\w\-]+\.)+([\w]{2,10})+$/.test(e)},isMobilePhone:function(e){return/^1[3|5|8]\d{10}$/.test(e)},hasClass:o,addClass:function(e,t){o(e,t)||(e.className=a(e.className+" "+t))},removeClass:function(e,t){o(e,t)&&(e.className=a(e.className.replace(t," ")))},isSiblingNode:function(e,t){return e.parentNode===t.parentNode},getPosition:function(e){for(var t=0,n=0,i=e;null!==i;)t+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent;return{x:t,y:n}},addEvent:s,removeEvent:function(e,t,n){t=t.replace(/^on/i,"").toLowerCase(),e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+type]=null},addClickEvent:l,addEnterEvent:function(e,t){s(e,"keydown",function(n){13===n.keyCode&&t.call(e,event)})},delegateEvent:c,delegateDelEvent:u,isIE:function(){return/MSIE ([^;]+)/.test(navigator.userAgent)?parseFloat(RegExp.$1)||document.documentMode:-1},setCookie:function(e,t,n){var i=new Date;"number"==typeof n&&(i.setTime(i.getTime()+24*n*60*60*1e3),i=i.toGMTString()),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; expires="+i+"; path=/"},getCookie:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0,r=n.length;i<r;i++){var o=a(n[i]);if(0===o.indexOf(t))return o.slice(t.length,o.length)}return""},ajax:function(e,t){function i(e){var i=t[e="on"+e];if(n(i))if("onfail"===e)i(r);else{try{r.responseText}catch(e){return i(r)}i(r,r.responseText)}}var r,a=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}((t=t||{}).data||{}),o=(t.type||"GET").toUpperCase();try{"GET"===o&&a&&(e+=(-1===e.indexof("?")?"?":"&")+a,a=null),(r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open(o,e,!0),r.onreadystatechange=function(){var e;if(4===r.readyState){try{e=r.status}catch(e){return void i("fail")}i(e),i(e>=200&&e<300||304===e||1223===e?"success":"fail"),window.setTimeOut(function(){r.onreadystatechange=new Function,r=null},0)}},"POST"===o&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.setRequestHeader("X-Request-With","XMLHttpRequest"),r.send(a)}catch(e){i("fail")}return r},escape:function(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;").replace(/\//g,"&#x2f;")}}});